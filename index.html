<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å…­ç¬¬6å†Šç¬¬4èª² - æˆ°çˆ­èˆ‡å’Œå¹³ | å¸¸è­˜å•ç­”æ¯”è³½</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #58cc02;
            --secondary-color: #1cb0f6;
            --danger-color: #ff4b4b;
            --light-color: #f8f9fa;
            --dark-color: #333;
            --gray-color: #e5e5e5;
            --text-color: #3c3c3c;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 16px;
        }

        body {
            background-color: #f0f2f5;
            color: var(--text-color);
            line-height: 1.6;
            padding: 10px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            text-align: center;
            padding: 15px 10px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        h1 i {
            color: var(--secondary-color);
        }

        .lesson-info {
            font-size: 1rem;
            color: #666;
            margin-top: 5px;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: var(--gray-color);
            border-radius: 10px;
            margin: 15px 0;
            height: 12px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 30%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }

        /* Main Content */
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        /* Duolingo Logo */
        .logo-container {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        /* Speech Bubble */
        .speech-bubble {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            position: relative;
            margin-bottom: 10px;
        }

        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50px;
            width: 0;
            height: 0;
            border: 15px solid transparent;
            border-top-color: white;
            border-bottom: 0;
            margin-left: -15px;
            margin-bottom: -15px;
        }

        .sentence {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 15px;
            line-height: 1.4;
            text-align: center;
        }

        .hint {
            font-size: 1rem;
            color: #666;
            border-left: 4px solid var(--secondary-color);
            padding-left: 12px;
            margin-top: 15px;
        }

        /* Question Type Indicator */
        .question-type {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* Part Indicator */
        .part-indicator {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-left: 10px;
            font-weight: normal;
        }

        /* Destination Area */
        .destination-area {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            min-height: 120px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
            border: 2px dashed #ddd;
            transition: border-color 0.3s;
        }

        .destination-area.active {
            border-color: var(--primary-color);
        }

        .word-slot {
            padding: 12px 20px;
            background-color: var(--light-color);
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-color);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .word-slot:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
        }

        .word-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .word-slot.incorrect {
            background-color: var(--danger-color);
            color: white;
        }

        /* Word Bank */
        .word-bank {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 10px;
        }

        .word-bank-title {
            font-size: 1.2rem;
            color: var(--dark-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .word-bank-title i {
            color: var(--secondary-color);
        }

        .words-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .word-option {
            padding: 12px 20px;
            background-color: var(--light-color);
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-color);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .word-option:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: translateY(-2px);
        }

        .word-option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .word-option.used {
            opacity: 0.5;
            cursor: not-allowed;
            text-decoration: line-through;
        }

        .word-option.used:hover {
            background-color: var(--light-color);
            color: var(--dark-color);
            transform: none;
        }

        /* Footer */
        footer {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-skip {
            background-color: var(--gray-color);
            color: #666;
        }

        .btn-skip:hover {
            background-color: #d8d8d8;
        }

        .btn-check {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-check:hover {
            background-color: #4ab901;
        }

        .btn-check:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Feedback Message */
        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
            font-weight: 500;
            display: none;
        }

        .feedback.correct {
            background-color: rgba(88, 204, 2, 0.1);
            color: #2a7c00;
            border: 2px solid var(--primary-color);
            display: block;
        }

        .feedback.incorrect {
            background-color: rgba(255, 75, 75, 0.1);
            color: #cc0000;
            border: 2px solid var(--danger-color);
            display: block;
        }

        /* Correct Answer Display */
        .correct-answer {
            margin-top: 15px;
            padding: 15px;
            background-color: rgba(28, 176, 246, 0.1);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--secondary-color);
        }

        .correct-answer-title {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 8px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sentence {
                font-size: 1.4rem;
            }
            
            .word-option, .word-slot {
                font-size: 1.1rem;
                padding: 10px 16px;
            }
            
            footer {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .sentence {
                font-size: 1.3rem;
            }
            
            .word-option, .word-slot {
                font-size: 1rem;
                padding: 8px 14px;
            }
            
            .speech-bubble, .word-bank, .destination-area {
                padding: 18px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-graduation-cap"></i> å°å…­ç¬¬6å†Šç¬¬4èª² - æˆ°çˆ­èˆ‡å’Œå¹³</h1>
        <div class="lesson-info">å¸¸è­˜å•ç­”æ¯”è³½ï¼šæ ¹æ“šèª²æ–‡å…§å®¹å›ç­”å•é¡Œ</div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="progress-text" id="progressText">ç¬¬ 1 é¡Œï¼Œå…± 10 é¡Œ</div>
    </header>

    <div class="main-container">
        <div class="logo-container">
            <div class="logo">ğŸ“š æˆ°çˆ­èˆ‡å’Œå¹³å¸¸è­˜å•ç­”</div>
        </div>

        <div class="speech-bubble">
            <div class="question-type">å•ç­”é¡Œ <span class="part-indicator" id="partIndicator">ç¬¬ä¸€éƒ¨åˆ†</span></div>
            <div class="sentence" id="sentence">æ ¹æ“šèª²æ–‡ï¼Œå¦‚ä½•å®šç¾©ã€Œæˆ°çˆ­ã€ï¼Ÿ</div>
            <div class="hint">é»æ“Šä¸‹æ–¹è©èªä¾†çµ„æˆæ­£ç¢ºç­”æ¡ˆã€‚ä¸æ˜¯æ‰€æœ‰è©èªéƒ½æœƒç”¨åˆ°ã€‚</div>
        </div>

        <div class="destination-area" id="destinationArea">
            <!-- å·²é¸è©èªå°‡å‡ºç¾åœ¨é€™è£¡ -->
            <div class="placeholder">é»æ“Šä¸‹æ–¹è©èªä¾†çµ„æˆç­”æ¡ˆ</div>
        </div>

        <div class="word-bank">
            <div class="word-bank-title"><i class="fas fa-list"></i> è©èªåº«</div>
            <div class="words-container" id="wordsContainer">
                <!-- è©èªå°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="correct-answer" id="correctAnswer" style="display: none;">
            <div class="correct-answer-title">æ­£ç¢ºç­”æ¡ˆï¼š</div>
            <div id="correctAnswerText"></div>
        </div>
    </div>

    <footer>
        <button class="btn btn-skip" id="skipBtn">
            <i class="fas fa-forward"></i> è·³é
        </button>
        <button class="btn btn-check" id="checkBtn" disabled>
            <i class="fas fa-check"></i> æª¢æŸ¥ç­”æ¡ˆ
        </button>
    </footer>

    <script>
        // ç·´ç¿’æ•¸æ“š - å¾50å€‹å•é¡Œä¸­ç²¾é¸10å€‹
        const exercises = [
            {
                id: 1,
                part: "ç¬¬ä¸€éƒ¨åˆ†ï¼šæˆ°çˆ­çš„å®šç¾©èˆ‡æœ¬è³ª",
                question: "æ ¹æ“šèª²æ–‡ï¼Œå¦‚ä½•å®šç¾©ã€Œæˆ°çˆ­ã€ï¼Ÿ",
                answer: ["æˆ°çˆ­", "æ˜¯", "ä¸€ç¨®", "ä»¥", "æ­¦åŠ›", "è§£æ±º", "ç´›çˆ­", "çš„", "æ–¹æ³•"],
                extraWords: ["å’Œå¹³", "è«‡åˆ¤", "å°è©±", "å¤–äº¤", "åˆä½œ", "å”å•†"]
            },
            {
                id: 2,
                part: "ç¬¬ä¸€éƒ¨åˆ†ï¼šæˆ°çˆ­çš„å®šç¾©èˆ‡æœ¬è³ª",
                question: "å°æ–¼è§£æ±ºç³¾ç´›ï¼Œèª²æ–‡å‚³éçš„æ ¸å¿ƒç«‹å ´æ˜¯ç”šéº¼ï¼Ÿ",
                answer: ["ç„¡è«–", "é‡åˆ°", "ä»»ä½•", "ç³¾ç´›", "éƒ½", "ä¸æ‡‰è©²", "ç”¨", "æ­¦åŠ›", "è§£æ±º"],
                extraWords: ["å¯ä»¥", "æ‡‰è©²", "å¿…é ˆ", "ç›¡é‡", "é¿å…", "ä½¿ç”¨"]
            },
            {
                id: 3,
                part: "ç¬¬ä¸€éƒ¨åˆ†ï¼šæˆ°çˆ­çš„å®šç¾©èˆ‡æœ¬è³ª",
                question: "é™¤äº†æ­¦åŠ›ï¼Œè§£æ±ºç´›çˆ­é‚„å¯ä»¥æœ‰ç”šéº¼æ–¹å¼ï¼Ÿ",
                answer: ["å¤–äº¤", "è«‡åˆ¤", "åœ‹éš›", "èª¿è§£", "æ³•å¾‹", "ä»²è£", "å°è©±", "èˆ‡", "å”å•†", "ç­‰", "å’Œå¹³", "æ–¹å¼"],
                extraWords: ["æˆ°çˆ­", "è¡çª", "å°æŠ—", "æš´åŠ›", "å¨è„…", "å ±å¾©"]
            },
            {
                id: 4,
                part: "ç¬¬äºŒéƒ¨åˆ†ï¼šæˆ°çˆ­çˆ†ç™¼çš„åŸå› ",
                question: "èª²æ–‡åˆ—å‡ºå“ªäº›å°è‡´æˆ°çˆ­çš„ä¸»è¦åŸå› ï¼Ÿ",
                answer: ["é ˜åœŸ", "ç´›çˆ­", "ç¶“æ¿Ÿ", "åˆ©ç›Š", "å®—æ•™", "è¡çª"],
                extraWords: ["æ–‡åŒ–", "äº¤æµ", "é«”è‚²", "ç«¶è³½", "è²¿æ˜“", "åˆä½œ"]
            },
            {
                id: 5,
                part: "ç¬¬äºŒéƒ¨åˆ†ï¼šæˆ°çˆ­çˆ†ç™¼çš„åŸå› ",
                question: "1950å¹´è‡³1953å¹´åœ¨æœé®®åŠå³¶ç™¼ç”Ÿçš„æˆ°çˆ­å«ç”šéº¼ï¼Ÿ",
                answer: ["å—åŒ—éŸ“", "æˆ°çˆ­", "æˆ–", "éŸ“æˆ°"],
                extraWords: ["è¶Šå—æˆ°çˆ­", "å…©ä¼Šæˆ°çˆ­", "ä¼Šæ‹‰å…‹æˆ°çˆ­", "ä¸–ç•Œå¤§æˆ°"]
            },
            {
                id: 6,
                part: "ç¬¬äºŒéƒ¨åˆ†ï¼šæˆ°çˆ­çˆ†ç™¼çš„åŸå› ",
                question: "2003å¹´è‡³2011å¹´ï¼Œä»¥ç¾åœ‹ç‚ºé¦–è¯è»å…¥ä¾µçš„æˆ°çˆ­å«ç”šéº¼ï¼Ÿ",
                answer: ["ä¼Šæ‹‰å…‹", "æˆ°çˆ­"],
                extraWords: ["é˜¿å¯Œæ±—æˆ°çˆ­", "è¶Šå—æˆ°çˆ­", "éŸ“æˆ°", "å…©ä¼Šæˆ°çˆ­"]
            },
            {
                id: 7,
                part: "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæˆ°çˆ­å¸¶ä¾†çš„å½±éŸ¿",
                question: "æˆ°çˆ­æœ€ç›´æ¥çš„å½±éŸ¿æ˜¯ç”šéº¼ï¼Ÿ",
                answer: ["é€ æˆ", "é¾å¤§", "çš„", "äººå‘½", "å‚·äº¡"],
                extraWords: ["ç¶“æ¿Ÿ", "ç™¼å±•", "æ–‡åŒ–", "é€²æ­¥", "ç§‘æŠ€", "å‰µæ–°"]
            },
            {
                id: 8,
                part: "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæˆ°çˆ­å¸¶ä¾†çš„å½±éŸ¿",
                question: "æˆ°çˆ­å¦‚ä½•å½±éŸ¿ä¸‹ä¸€ä»£å…’ç«¥ï¼Ÿ",
                answer: ["å¯èƒ½", "å¤±å»", "å—æ•™è‚²", "æ©Ÿæœƒ", "èº«å¿ƒ", "ç™¼å±•", "å—å‰µ", "åœ¨", "æš´åŠ›", "ç’°å¢ƒ", "ä¸­", "æˆé•·"],
                extraWords: ["ç²å¾—", "æ›´å¤š", "è³‡æº", "äº«å—", "å’Œå¹³", "ç”Ÿæ´»", "å¥åº·", "æˆé•·"]
            },
            {
                id: 9,
                part: "ç¬¬å››éƒ¨åˆ†ï¼šç¶­è­·å’Œå¹³èˆ‡äººé“æ´åŠ©",
                question: "ä¸–ç•Œä¸Šæœ€é‡è¦çš„ç¶­è­·å’Œå¹³çš„åœ‹éš›çµ„ç¹”æ˜¯ç”šéº¼ï¼Ÿ",
                answer: ["è¯åˆåœ‹"],
                extraWords: ["ç„¡åœ‹ç•Œé†«ç”Ÿ", "åœ‹éš›ç´…åå­—æœƒ", "ä¸–ç•Œè¡›ç”Ÿçµ„ç¹”", "åŒ—ç´„çµ„ç¹”"]
            },
            {
                id: 10,
                part: "ç¬¬å››éƒ¨åˆ†ï¼šç¶­è­·å’Œå¹³èˆ‡äººé“æ´åŠ©",
                question: "è¯åˆåœ‹çš„å››é …ä¸»è¦å’Œå¹³å·¥ä½œæ˜¯ä»€éº¼ï¼Ÿ",
                answer: ["ç›£å¯Ÿ", "æ­¦è£", "çµ„ç¹”", "èª¿è§£", "å„åœ‹", "çš„", "ç´›çˆ­", "æ´åŠ©", "é›£æ°‘", "æ¶ˆé™¤", "å¤§", "æ®ºå‚·åŠ›", "æ­¦å™¨"],
                extraWords: ["èˆ‰è¾¦", "é‹å‹•æœƒ", "æ¨å»£", "æ—…éŠ", "ç™¼å±•", "ç¶“æ¿Ÿ", "è²¿æ˜“"]
            }
        ];

        // ç•¶å‰ç·´ç¿’ç´¢å¼•
        let currentExerciseIndex = 0;
        let selectedWords = [];
        let wordElements = [];

        // DOMå…ƒç´ 
        const sentenceElement = document.getElementById('sentence');
        const partIndicatorElement = document.getElementById('partIndicator');
        const destinationArea = document.getElementById('destinationArea');
        const wordsContainer = document.getElementById('wordsContainer');
        const checkBtn = document.getElementById('checkBtn');
        const skipBtn = document.getElementById('skipBtn');
        const feedbackElement = document.getElementById('feedback');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const correctAnswerElement = document.getElementById('correctAnswer');
        const correctAnswerTextElement = document.getElementById('correctAnswerText');

        // åˆå§‹åŒ–
        function init() {
            loadExercise(currentExerciseIndex);
            updateProgress();
            
            // æ·»åŠ äº‹ä»¶ç›£è½å™¨
            checkBtn.addEventListener('click', checkAnswer);
            skipBtn.addEventListener('click', skipExercise);
        }

        // è¼‰å…¥ç·´ç¿’
        function loadExercise(index) {
            const exercise = exercises[index];
            
            // é‡ç½®ç‹€æ…‹
            selectedWords = [];
            wordElements = [];
            destinationArea.innerHTML = '<div class="placeholder">é»æ“Šä¸‹æ–¹è©èªä¾†çµ„æˆç­”æ¡ˆ</div>';
            destinationArea.classList.remove('active');
            feedbackElement.className = 'feedback';
            feedbackElement.textContent = '';
            correctAnswerElement.style.display = 'none';
            checkBtn.disabled = true;
            
            // æ›´æ–°å•é¡Œå’Œéƒ¨åˆ†
            sentenceElement.textContent = exercise.question;
            partIndicatorElement.textContent = exercise.part.split('ï¼š')[0];
            
            // å‰µå»ºè©èªåº«
            createWordBank(exercise);
        }

        // å‰µå»ºè©èªåº«
        function createWordBank(exercise) {
            wordsContainer.innerHTML = '';
            
            // åˆä½µæ­£ç¢ºè©èªå’Œé¡å¤–è©èª
            const allWords = [...exercise.answer, ...exercise.extraWords];
            
            // éš¨æ©Ÿæ’åº
            const shuffledWords = shuffleArray([...allWords]);
            
            // å‰µå»ºè©èªå…ƒç´ 
            shuffledWords.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-option';
                wordElement.textContent = word;
                wordElement.dataset.word = word;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶
                wordElement.addEventListener('click', () => selectWord(word, wordElement));
                
                // æ·»åŠ åˆ°å®¹å™¨
                wordsContainer.appendChild(wordElement);
                wordElements.push({word, element: wordElement});
            });
        }

        // é¸æ“‡è©èª
        function selectWord(word, element) {
            // å¦‚æœè©èªå·²è¢«ä½¿ç”¨ï¼Œå‰‡å¿½ç•¥
            if (element.classList.contains('used')) {
                return;
            }
            
            // æ¨™è¨˜è©èªç‚ºå·²ä½¿ç”¨
            element.classList.add('used');
            element.classList.add('selected');
            
            // æ·»åŠ åˆ°å·²é¸è©èªåˆ—è¡¨
            selectedWords.push(word);
            
            // æ›´æ–°ç›®æ¨™å€åŸŸ
            updateDestinationArea();
            
            // å•Ÿç”¨æª¢æŸ¥æŒ‰éˆ•
            checkBtn.disabled = false;
        }

        // æ›´æ–°ç›®æ¨™å€åŸŸ
        function updateDestinationArea() {
            destinationArea.innerHTML = '';
            destinationArea.classList.add('active');
            
            selectedWords.forEach((word, index) => {
                const wordSlot = document.createElement('div');
                wordSlot.className = 'word-slot';
                wordSlot.textContent = word;
                wordSlot.dataset.index = index;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶ä»¥å–æ¶ˆé¸æ“‡
                wordSlot.addEventListener('click', () => deselectWord(index));
                
                destinationArea.appendChild(wordSlot);
            });
        }

        // å–æ¶ˆé¸æ“‡è©èª
        function deselectWord(index) {
            // å¾å·²é¸è©èªä¸­ç§»é™¤
            const removedWord = selectedWords.splice(index, 1)[0];
            
            // æ‰¾åˆ°å°æ‡‰çš„è©èªå…ƒç´ ä¸¦æ¢å¾©
            const wordElement = wordElements.find(item => item.word === removedWord && item.element.classList.contains('used'));
            if (wordElement) {
                wordElement.element.classList.remove('used');
                wordElement.element.classList.remove('selected');
            }
            
            // æ›´æ–°ç›®æ¨™å€åŸŸ
            if (selectedWords.length === 0) {
                destinationArea.innerHTML = '<div class="placeholder">é»æ“Šä¸‹æ–¹è©èªä¾†çµ„æˆç­”æ¡ˆ</div>';
                destinationArea.classList.remove('active');
                checkBtn.disabled = true;
            } else {
                updateDestinationArea();
            }
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const currentExercise = exercises[currentExerciseIndex];
            const correctAnswer = currentExercise.answer;
            
            // æª¢æŸ¥æ˜¯å¦å®Œå…¨åŒ¹é…
            const isCorrect = arraysEqual(selectedWords, correctAnswer);
            
            // é¡¯ç¤ºåé¥‹
            if (isCorrect) {
                feedbackElement.textContent = 'âœ“ æ­£ç¢ºï¼ç­”æ¡ˆå®Œå…¨æ­£ç¢ºã€‚';
                feedbackElement.className = 'feedback correct';
                
                // è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
                setTimeout(() => {
                    nextExercise();
                }, 1500);
            } else {
                feedbackElement.textContent = 'âœ— ä¸æ­£ç¢ºã€‚è«‹å†è©¦ä¸€æ¬¡æˆ–æŸ¥çœ‹æ­£ç¢ºç­”æ¡ˆã€‚';
                feedbackElement.className = 'feedback incorrect';
                
                // æ¨™è¨˜éŒ¯èª¤çš„è©èª
                markIncorrectWords(correctAnswer);
                
                // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
                showCorrectAnswer(correctAnswer);
            }
        }

        // æ¨™è¨˜éŒ¯èª¤çš„è©èª
        function markIncorrectWords(correctAnswer) {
            const wordSlots = document.querySelectorAll('.word-slot');
            
            wordSlots.forEach((slot, index) => {
                if (selectedWords[index] !== correctAnswer[index]) {
                    slot.classList.add('incorrect');
                }
            });
        }

        // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
        function showCorrectAnswer(correctAnswer) {
            correctAnswerTextElement.textContent = correctAnswer.join('');
            correctAnswerElement.style.display = 'block';
        }

        // è·³éç·´ç¿’
        function skipExercise() {
            nextExercise();
        }

        // ä¸‹ä¸€é¡Œ
        function nextExercise() {
            currentExerciseIndex++;
            
            if (currentExerciseIndex >= exercises.length) {
                currentExerciseIndex = 0; // å¾ªç’°å›åˆ°ç¬¬ä¸€é¡Œ
            }
            
            loadExercise(currentExerciseIndex);
            updateProgress();
        }

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            const progressPercentage = ((currentExerciseIndex + 1) / exercises.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `ç¬¬ ${currentExerciseIndex + 1} é¡Œï¼Œå…± ${exercises.length} é¡Œ`;
        }

        // è¼”åŠ©å‡½æ•¸ï¼šéš¨æ©Ÿæ’åºæ•¸çµ„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // è¼”åŠ©å‡½æ•¸ï¼šæ¯”è¼ƒå…©å€‹æ•¸çµ„æ˜¯å¦ç›¸ç­‰
        function arraysEqual(arr1, arr2) {
            if (arr1.length !== arr2.length) return false;
            for (let i = 0; i < arr1.length; i++) {
                if (arr1[i] !== arr2[i]) return false;
            }
            return true;
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
