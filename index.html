<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å…­ç¬¬6å†Šç¬¬4èª² - æˆ°çˆ­èˆ‡å’Œå¹³ | å¸¸è­˜å•ç­”æ¯”è³½</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #58cc02;
            --secondary-color: #1cb0f6;
            --danger-color: #ff4b4b;
            --light-color: #f8f9fa;
            --dark-color: #333;
            --gray-color: #e5e5e5;
            --text-color: #3c3c3c;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 16px;
        }

        body {
            background-color: #f0f2f5;
            color: var(--text-color);
            line-height: 1.6;
            padding: 10px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            text-align: center;
            padding: 15px 10px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        h1 i {
            color: var(--secondary-color);
        }

        .lesson-info {
            font-size: 1rem;
            color: #666;
            margin-top: 5px;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: var(--gray-color);
            border-radius: 10px;
            margin: 15px 0;
            height: 12px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 30%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }

        /* Main Content */
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        /* Duolingo Logo */
        .logo-container {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo {
            width: 120px;
            height: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        /* Speech Bubble */
        .speech-bubble {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            position: relative;
            margin-bottom: 10px;
        }

        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50px;
            width: 0;
            height: 0;
            border: 15px solid transparent;
            border-top-color: white;
            border-bottom: 0;
            margin-left: -15px;
            margin-bottom: -15px;
        }

        .sentence {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 15px;
            line-height: 1.4;
            text-align: center;
        }

        .sentence-en {
            font-size: 1.4rem;
            color: #666;
            font-style: italic;
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .hint {
            font-size: 1rem;
            color: #666;
            border-left: 4px solid var(--secondary-color);
            padding-left: 12px;
            margin-top: 15px;
        }

        /* Destination Area */
        .destination-area {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            min-height: 120px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
            border: 2px dashed #ddd;
            transition: border-color 0.3s;
        }

        .destination-area.active {
            border-color: var(--primary-color);
        }

        .word-slot {
            padding: 12px 20px;
            background-color: var(--light-color);
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-color);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .word-slot:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
        }

        .word-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .word-slot.incorrect {
            background-color: var(--danger-color);
            color: white;
        }

        /* Word Bank */
        .word-bank {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 10px;
        }

        .word-bank-title {
            font-size: 1.2rem;
            color: var(--dark-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .word-bank-title i {
            color: var(--secondary-color);
        }

        .words-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .word-option {
            padding: 12px 20px;
            background-color: var(--light-color);
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-color);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .word-option:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: translateY(-2px);
        }

        .word-option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .word-option.used {
            opacity: 0.5;
            cursor: not-allowed;
            text-decoration: line-through;
        }

        .word-option.used:hover {
            background-color: var(--light-color);
            color: var(--dark-color);
            transform: none;
        }

        /* Footer */
        footer {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-skip {
            background-color: var(--gray-color);
            color: #666;
        }

        .btn-skip:hover {
            background-color: #d8d8d8;
        }

        .btn-check {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-check:hover {
            background-color: #4ab901;
        }

        .btn-check:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Feedback Message */
        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
            font-weight: 500;
            display: none;
        }

        .feedback.correct {
            background-color: rgba(88, 204, 2, 0.1);
            color: #2a7c00;
            border: 2px solid var(--primary-color);
            display: block;
        }

        .feedback.incorrect {
            background-color: rgba(255, 75, 75, 0.1);
            color: #cc0000;
            border: 2px solid var(--danger-color);
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sentence {
                font-size: 1.5rem;
            }
            
            .sentence-en {
                font-size: 1.2rem;
            }
            
            .word-option, .word-slot {
                font-size: 1.1rem;
                padding: 10px 16px;
            }
            
            footer {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .sentence {
                font-size: 1.3rem;
            }
            
            .sentence-en {
                font-size: 1.1rem;
            }
            
            .word-option, .word-slot {
                font-size: 1rem;
                padding: 8px 14px;
            }
            
            .speech-bubble, .word-bank, .destination-area {
                padding: 18px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-graduation-cap"></i> å°å…­ç¬¬6å†Šç¬¬4èª² - æˆ°çˆ­èˆ‡å’Œå¹³</h1>
        <div class="lesson-info">å¸¸è­˜å•ç­”æ¯”è³½ï¼šå°‡è‹±æ–‡å¥å­ç¿»è­¯æˆè¥¿ç­ç‰™æ–‡</div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="progress-text" id="progressText">ç¬¬ 3 é¡Œï¼Œå…± 10 é¡Œ</div>
    </header>

    <div class="main-container">
        <div class="logo-container">
            <div class="logo">ğŸ“š æˆ°çˆ­èˆ‡å’Œå¹³å•ç­”æ¯”è³½</div>
        </div>

        <div class="speech-bubble">
            <div class="sentence" id="sentence">War is a method of resolving disputes through force.</div>
            <div class="sentence-en" id="sentenceTranslation">æˆ°çˆ­æ˜¯ä¸€ç¨®ä»¥æ­¦åŠ›è§£æ±ºç´›çˆ­çš„æ–¹æ³•ã€‚</div>
            <div class="hint">é»æ“Šä¸‹æ–¹å–®è©ä¾†çµ„æˆæ­£ç¢ºçš„è¥¿ç­ç‰™æ–‡ç¿»è­¯ã€‚ä¸æ˜¯æ‰€æœ‰å–®è©éƒ½æœƒç”¨åˆ°ã€‚</div>
        </div>

        <div class="destination-area" id="destinationArea">
            <!-- å·²é¸å–®è©å°‡å‡ºç¾åœ¨é€™è£¡ -->
            <div class="placeholder">é»æ“Šä¸‹æ–¹å–®è©ä¾†çµ„æˆå¥å­</div>
        </div>

        <div class="word-bank">
            <div class="word-bank-title"><i class="fas fa-list"></i> è¥¿ç­ç‰™æ–‡å–®è©åº«</div>
            <div class="words-container" id="wordsContainer">
                <!-- å–®è©å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>

        <div class="feedback" id="feedback"></div>
    </div>

    <footer>
        <button class="btn btn-skip" id="skipBtn">
            <i class="fas fa-forward"></i> è·³é
        </button>
        <button class="btn btn-check" id="checkBtn" disabled>
            <i class="fas fa-check"></i> æª¢æŸ¥ç­”æ¡ˆ
        </button>
    </footer>

    <script>
        // ç·´ç¿’æ•¸æ“š - åŸºæ–¼ã€Šæˆ°çˆ­èˆ‡å’Œå¹³ã€‹èª²æ–‡å…§å®¹
        const exercises = [
            {
                id: 1,
                english: "War is a method of resolving disputes through force.",
                chinese: "æˆ°çˆ­æ˜¯ä¸€ç¨®ä»¥æ­¦åŠ›è§£æ±ºç´›çˆ­çš„æ–¹æ³•ã€‚",
                spanish: ["La", "guerra", "es", "un", "mÃ©todo", "para", "resolver", "disputas", "con", "fuerza"],
                extraWords: ["conflicto", "paz", "diplomacia", "violencia"]
            },
            {
                id: 2,
                english: "Territorial disputes are a major cause of war.",
                chinese: "é ˜åœŸç´›çˆ­æ˜¯æˆ°çˆ­çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚",
                spanish: ["Las", "disputas", "territoriales", "son", "una", "causa", "principal", "de", "guerra"],
                extraWords: ["econÃ³micas", "recursos", "petrÃ³leo", "religiosas"]
            },
            {
                id: 3,
                english: "War causes the loss of human lives and destruction of infrastructure.",
                chinese: "æˆ°çˆ­å°è‡´äººå‘½å‚·äº¡å’ŒåŸºç¤è¨­æ–½ç ´å£ã€‚",
                spanish: ["La", "guerra", "causa", "pÃ©rdida", "de", "vidas", "humanas", "y", "destrucciÃ³n", "de", "infraestructura"],
                extraWords: ["edificios", "carreteras", "hospitales", "escuelas"]
            },
            {
                id: 4,
                english: "Landmines remain a threat long after wars end.",
                chinese: "åœ°é›·åœ¨æˆ°çˆ­çµæŸå¾Œä»ç„¶æ§‹æˆé•·æœŸå¨è„…ã€‚",
                spanish: ["Las", "minas", "terrestres", "siguen", "siendo", "una", "amenaza", "mucho", "despuÃ©s", "de", "las", "guerras"],
                extraWords: ["bombas", "explosivos", "peligro", "seguridad"]
            },
            {
                id: 5,
                english: "Refugees are forced to leave their homes due to war.",
                chinese: "é›£æ°‘å› æˆ°çˆ­è¢«è¿«é›¢é–‹å®¶åœ’ã€‚",
                spanish: ["Los", "refugiados", "se", "ven", "obligados", "a", "abandonar", "sus", "hogares", "debido", "a", "la", "guerra"],
                extraWords: ["inmigrantes", "desplazados", "paÃ­s", "naciÃ³n"]
            },
            {
                id: 6,
                english: "The United Nations works to maintain world peace.",
                chinese: "è¯åˆåœ‹è‡´åŠ›æ–¼ç¶­è­·ä¸–ç•Œå’Œå¹³ã€‚",
                spanish: ["Las", "Naciones", "Unidas", "trabajan", "para", "mantener", "la", "paz", "mundial"],
                extraWords: ["organizaciÃ³n", "internacional", "paÃ­ses", "miembros"]
            },
            {
                id: 7,
                english: "Doctors Without Borders provides medical aid in war zones.",
                chinese: "ç„¡åœ‹ç•Œé†«ç”Ÿåœ¨æˆ°å€æä¾›é†«ç™‚æ´åŠ©ã€‚",
                spanish: ["MÃ©dicos", "Sin", "Fronteras", "proporciona", "ayuda", "mÃ©dica", "en", "zonas", "de", "guerra"],
                extraWords: ["hospitales", "mÃ³viles", "voluntarios", "emergencia"]
            },
            {
                id: 8,
                english: "Peace requires international cooperation and mutual respect.",
                chinese: "å’Œå¹³éœ€è¦åœ‹éš›åˆä½œå’Œç›¸äº’å°Šé‡ã€‚",
                spanish: ["La", "paz", "requiere", "cooperaciÃ³n", "internacional", "y", "respeto", "mutuo"],
                extraWords: ["diÃ¡logo", "entendimiento", "colaboraciÃ³n", "armonÃ­a"]
            },
            {
                id: 9,
                english: "World War I lasted from 1914 to 1918.",
                chinese: "ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ°å¾1914å¹´æŒçºŒåˆ°1918å¹´ã€‚",
                spanish: ["La", "Primera", "Guerra", "Mundial", "durÃ³", "de", "1914", "a", "1918"],
                extraWords: ["segunda", "1939", "1945", "conflicto"]
            },
            {
                id: 10,
                english: "Dialogue and negotiation are better than violence.",
                chinese: "å°è©±å’Œè«‡åˆ¤æ¯”æš´åŠ›æ›´å¥½ã€‚",
                spanish: ["El", "diÃ¡logo", "y", "la", "negociaciÃ³n", "son", "mejores", "que", "la", "violencia"],
                extraWords: ["fuerza", "combate", "batalla", "confrontaciÃ³n"]
            }
        ];

        // ç•¶å‰ç·´ç¿’ç´¢å¼•
        let currentExerciseIndex = 0;
        let selectedWords = [];
        let wordElements = [];

        // DOMå…ƒç´ 
        const sentenceElement = document.getElementById('sentence');
        const sentenceTranslationElement = document.getElementById('sentenceTranslation');
        const destinationArea = document.getElementById('destinationArea');
        const wordsContainer = document.getElementById('wordsContainer');
        const checkBtn = document.getElementById('checkBtn');
        const skipBtn = document.getElementById('skipBtn');
        const feedbackElement = document.getElementById('feedback');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');

        // åˆå§‹åŒ–
        function init() {
            loadExercise(currentExerciseIndex);
            updateProgress();
            
            // æ·»åŠ äº‹ä»¶ç›£è½å™¨
            checkBtn.addEventListener('click', checkAnswer);
            skipBtn.addEventListener('click', skipExercise);
        }

        // è¼‰å…¥ç·´ç¿’
        function loadExercise(index) {
            const exercise = exercises[index];
            
            // é‡ç½®ç‹€æ…‹
            selectedWords = [];
            wordElements = [];
            destinationArea.innerHTML = '<div class="placeholder">é»æ“Šä¸‹æ–¹å–®è©ä¾†çµ„æˆå¥å­</div>';
            destinationArea.classList.remove('active');
            feedbackElement.className = 'feedback';
            feedbackElement.textContent = '';
            checkBtn.disabled = true;
            
            // æ›´æ–°å¥å­
            sentenceElement.textContent = exercise.english;
            sentenceTranslationElement.textContent = exercise.chinese;
            
            // å‰µå»ºå–®è©åº«
            createWordBank(exercise);
        }

        // å‰µå»ºå–®è©åº«
        function createWordBank(exercise) {
            wordsContainer.innerHTML = '';
            
            // åˆä½µæ­£ç¢ºå–®è©å’Œé¡å¤–å–®è©
            const allWords = [...exercise.spanish, ...exercise.extraWords];
            
            // éš¨æ©Ÿæ’åº
            const shuffledWords = shuffleArray([...allWords]);
            
            // å‰µå»ºå–®è©å…ƒç´ 
            shuffledWords.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-option';
                wordElement.textContent = word;
                wordElement.dataset.word = word;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶
                wordElement.addEventListener('click', () => selectWord(word, wordElement));
                
                // æ·»åŠ åˆ°å®¹å™¨
                wordsContainer.appendChild(wordElement);
                wordElements.push({word, element: wordElement});
            });
        }

        // é¸æ“‡å–®è©
        function selectWord(word, element) {
            // å¦‚æœå–®è©å·²è¢«ä½¿ç”¨ï¼Œå‰‡å¿½ç•¥
            if (element.classList.contains('used')) {
                return;
            }
            
            // æ¨™è¨˜å–®è©ç‚ºå·²ä½¿ç”¨
            element.classList.add('used');
            element.classList.add('selected');
            
            // æ·»åŠ åˆ°å·²é¸å–®è©åˆ—è¡¨
            selectedWords.push(word);
            
            // æ›´æ–°ç›®æ¨™å€åŸŸ
            updateDestinationArea();
            
            // å•Ÿç”¨æª¢æŸ¥æŒ‰éˆ•
            checkBtn.disabled = false;
        }

        // æ›´æ–°ç›®æ¨™å€åŸŸ
        function updateDestinationArea() {
            destinationArea.innerHTML = '';
            destinationArea.classList.add('active');
            
            selectedWords.forEach((word, index) => {
                const wordSlot = document.createElement('div');
                wordSlot.className = 'word-slot';
                wordSlot.textContent = word;
                wordSlot.dataset.index = index;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶ä»¥å–æ¶ˆé¸æ“‡
                wordSlot.addEventListener('click', () => deselectWord(index));
                
                destinationArea.appendChild(wordSlot);
            });
        }

        // å–æ¶ˆé¸æ“‡å–®è©
        function deselectWord(index) {
            // å¾å·²é¸å–®è©ä¸­ç§»é™¤
            const removedWord = selectedWords.splice(index, 1)[0];
            
            // æ‰¾åˆ°å°æ‡‰çš„å–®è©å…ƒç´ ä¸¦æ¢å¾©
            const wordElement = wordElements.find(item => item.word === removedWord && item.element.classList.contains('used'));
            if (wordElement) {
                wordElement.element.classList.remove('used');
                wordElement.element.classList.remove('selected');
            }
            
            // æ›´æ–°ç›®æ¨™å€åŸŸ
            if (selectedWords.length === 0) {
                destinationArea.innerHTML = '<div class="placeholder">é»æ“Šä¸‹æ–¹å–®è©ä¾†çµ„æˆå¥å­</div>';
                destinationArea.classList.remove('active');
                checkBtn.disabled = true;
            } else {
                updateDestinationArea();
            }
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const currentExercise = exercises[currentExerciseIndex];
            const correctAnswer = currentExercise.spanish;
            
            // æª¢æŸ¥æ˜¯å¦å®Œå…¨åŒ¹é…
            const isCorrect = arraysEqual(selectedWords, correctAnswer);
            
            // é¡¯ç¤ºåé¥‹
            if (isCorrect) {
                feedbackElement.textContent = 'âœ“ æ­£ç¢ºï¼ç¿»è­¯å®Œå…¨æ­£ç¢ºã€‚';
                feedbackElement.className = 'feedback correct';
                
                // è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
                setTimeout(() => {
                    nextExercise();
                }, 1500);
            } else {
                feedbackElement.textContent = 'âœ— ä¸æ­£ç¢ºã€‚è«‹å†è©¦ä¸€æ¬¡ã€‚';
                feedbackElement.className = 'feedback incorrect';
                
                // æ¨™è¨˜éŒ¯èª¤çš„å–®è©
                markIncorrectWords(correctAnswer);
            }
        }

        // æ¨™è¨˜éŒ¯èª¤çš„å–®è©
        function markIncorrectWords(correctAnswer) {
            const wordSlots = document.querySelectorAll('.word-slot');
            
            wordSlots.forEach((slot, index) => {
                if (selectedWords[index] !== correctAnswer[index]) {
                    slot.classList.add('incorrect');
                }
            });
        }

        // è·³éç·´ç¿’
        function skipExercise() {
            nextExercise();
        }

        // ä¸‹ä¸€é¡Œ
        function nextExercise() {
            currentExerciseIndex++;
            
            if (currentExerciseIndex >= exercises.length) {
                currentExerciseIndex = 0; // å¾ªç’°å›åˆ°ç¬¬ä¸€é¡Œ
            }
            
            loadExercise(currentExerciseIndex);
            updateProgress();
        }

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            const progressPercentage = ((currentExerciseIndex + 1) / exercises.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `ç¬¬ ${currentExerciseIndex + 1} é¡Œï¼Œå…± ${exercises.length} é¡Œ`;
        }

        // è¼”åŠ©å‡½æ•¸ï¼šéš¨æ©Ÿæ’åºæ•¸çµ„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // è¼”åŠ©å‡½æ•¸ï¼šæ¯”è¼ƒå…©å€‹æ•¸çµ„æ˜¯å¦ç›¸ç­‰
        function arraysEqual(arr1, arr2) {
            if (arr1.length !== arr2.length) return false;
            for (let i = 0; i < arr1.length; i++) {
                if (arr1[i] !== arr2[i]) return false;
            }
            return true;
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
