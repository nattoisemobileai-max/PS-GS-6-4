<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>費曼學習法 - 急救知識溫習系統</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --accent: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --yellow: #f1c40f;
            --purple: #9b59b6;
            --border-radius: 12px;
            --box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* 標題樣式 */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .main-title {
            color: var(--dark);
            font-size: 2.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .main-title i {
            color: var(--accent);
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* 費曼學習法介紹 */
        .feynman-intro {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: var(--box-shadow);
        }
        
        .feynman-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .step-card {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            transition: var(--transition);
            border-left: 5px solid var(--primary);
        }
        
        .step-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        
        .step-title {
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        /* 學習區域 */
        .learning-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 900px) {
            .learning-area {
                grid-template-columns: 1fr;
            }
        }
        
        .concept-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            background-color: var(--light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--primary);
        }
        
        .card-title {
            font-size: 1.8rem;
            color: var(--dark);
        }
        
        /* 學習內容 */
        .learning-content {
            margin-bottom: 30px;
        }
        
        .topic-item {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: var(--transition);
            border-left: 4px solid transparent;
        }
        
        .topic-item:hover {
            background-color: #e0e7ff;
            border-left-color: var(--primary);
        }
        
        .topic-item.active {
            background-color: #e3f2fd;
            border-left-color: var(--primary);
        }
        
        .topic-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .topic-desc {
            color: #666;
            font-size: 0.95rem;
        }
        
        /* 詳細內容 */
        .detail-content {
            display: none;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 20px;
            border: 1px solid #eaeaea;
        }
        
        .detail-content.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }
        
        .detail-title {
            color: var(--dark);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }
        
        .key-points {
            margin: 20px 0;
            padding-left: 20px;
        }
        
        .key-points li {
            margin-bottom: 10px;
            color: #555;
        }
        
        /* 教學模擬區 */
        .teaching-area {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
        }
        
        .teaching-prompt {
            background-color: #e8f4fc;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid var(--primary);
        }
        
        .teaching-question {
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        /* 錄音區 */
        .recording-area {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
        }
        
        .recording-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .record-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            background-color: var(--accent);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .record-btn:hover {
            background-color: #c0392b;
            transform: scale(1.05);
        }
        
        .record-btn.recording {
            animation: pulse 1.5s infinite;
            background-color: #c0392b;
        }
        
        .play-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background-color: var(--secondary);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .play-btn:hover {
            background-color: #27ae60;
        }
        
        .timer {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--dark);
            margin: 20px 0;
        }
        
        /* 筆記區 */
        .notes-area {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
        }
        
        .notes-input {
            width: 100%;
            height: 200px;
            padding: 20px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            margin-top: 20px;
            resize: vertical;
            transition: var(--transition);
        }
        
        .notes-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        /* 測驗區 */
        .quiz-area {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
        }
        
        .quiz-question {
            font-size: 1.4rem;
            margin-bottom: 25px;
            color: var(--dark);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quiz-option {
            padding: 18px 25px;
            background-color: var(--light);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            font-size: 1.1rem;
        }
        
        .quiz-option:hover {
            background-color: #e0e7ff;
            border-color: var(--primary);
        }
        
        .quiz-option.selected {
            background-color: #e3f2fd;
            border-color: var(--primary);
        }
        
        .quiz-option.correct {
            background-color: #d4edda;
            border-color: var(--secondary);
        }
        
        .quiz-option.incorrect {
            background-color: #f8d7da;
            border-color: var(--accent);
        }
        
        /* 按鈕樣式 */
        .btn {
            padding: 15px 35px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }
        
        .btn-success {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-warning {
            background-color: var(--yellow);
            color: var(--dark);
        }
        
        .btn-warning:hover {
            background-color: #f39c12;
        }
        
        /* 進度條 */
        .progress-container {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: var(--box-shadow);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        /* 動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(231, 76, 60, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* 響應式調整 */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .learning-area {
                grid-template-columns: 1fr;
            }
            
            .recording-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .feynman-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 標題區 -->
        <div class="header fade-in">
            <h1 class="main-title">
                <i class="fas fa-brain"></i>
                費曼學習法 - 急救知識溫習系統
            </h1>
            <p class="subtitle">
                透過「以教為學」的方式，深入掌握急救知識。選擇一個主題，學習後嘗試教給別人，找出知識盲點並加強理解。
            </p>
        </div>
        
        <!-- 費曼學習法介紹 -->
        <div class="feynman-intro fade-in">
            <h2 style="color: var(--dark); margin-bottom: 20px; font-size: 2rem;">什麼是費曼學習法？</h2>
            <p style="color: #666; margin-bottom: 25px; font-size: 1.1rem;">
                費曼學習法是一種高效的學習方法，由諾貝爾物理學獎得主理查德·費曼提出。核心思想是：<strong>如果你不能簡單地解釋一件事，你就沒有真正理解它。</strong>
                這個方法通過四個步驟幫助你深入理解知識。
            </p>
            
            <div class="feynman-steps">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h3 class="step-title">選擇概念</h3>
                    <p>選擇一個你想要學習的急救知識主題</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h3 class="step-title">教學解釋</h3>
                    <p>想像你正在教一個完全不懂的人，用自己的話解釋</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h3 class="step-title">發現盲點</h3>
                    <p>在解釋過程中發現自己的知識漏洞和不清楚的地方</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">4</div>
                    <h3 class="step-title">簡化加強</h3>
                    <p>重新學習薄弱環節，用更簡單的方式理解概念</p>
                </div>
            </div>
        </div>
        
        <!-- 學習區域 -->
        <div class="learning-area">
            <!-- 左側：學習內容 -->
            <div class="concept-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <h2 class="card-title">急救知識主題</h2>
                </div>
                
                <div class="learning-content">
                    <div class="topic-item active" data-topic="basic-first-aid">
                        <div class="topic-title">
                            基本急救原則
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="topic-desc">學習急救的基本目的、步驟和注意事項</div>
                    </div>
                    
                    <div class="detail-content active" id="detail-basic-first-aid">
                        <h3 class="detail-title">基本急救原則</h3>
                        <p><strong>急救目的：</strong>防止傷勢惡化、保存生命、促進康復</p>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">急救黃金步驟：</h4>
                        <div class="key-points">
                            <li><strong>確保安全：</strong>先確保自己和傷者的安全環境</li>
                            <li><strong>評估情況：</strong>檢查傷者意識、呼吸和傷勢</li>
                            <li><strong>尋求協助：</strong>必要時立即報警或呼叫救護車</li>
                            <li><strong>實施急救：</strong>根據情況進行適當的急救措施</li>
                            <li><strong>持續觀察：</strong>監測傷者情況直到專業人員到達</li>
                        </div>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">重要原則：</h4>
                        <div class="key-points">
                            <li>先處理危及生命的狀況（如呼吸停止、大出血）</li>
                            <li>不要移動骨折或脊椎受傷的傷者</li>
                            <li>急救時應戴上手套等保護裝備</li>
                            <li>保持冷靜，安撫傷者情緒</li>
                        </div>
                    </div>
                    
                    <div class="topic-item" data-topic="bleeding">
                        <div class="topic-title">
                            出血處理
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="topic-desc">學習處理流鼻血、傷口出血等情況</div>
                    </div>
                    
                    <div class="detail-content" id="detail-bleeding">
                        <h3 class="detail-title">出血處理方法</h3>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">流鼻血處理：</h4>
                        <div class="key-points">
                            <li><strong>坐下頭前傾：</strong>坐下，頭微向前傾（不要仰頭）</li>
                            <li><strong>捏住鼻翼：</strong>用手指捏住鼻骨下的柔軟部分</li>
                            <li><strong>用口呼吸：</strong>用口呼吸，維持10-15分鐘</li>
                            <li><strong>冷敷：</strong>可用冰袋敷在鼻樑和額頭</li>
                            <li><strong>就醫：</strong>如果流血持續20分鐘以上，應就醫</li>
                        </div>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">傷口出血處理：</h4>
                        <div class="key-points">
                            <li><strong>直接加壓：</strong>用清潔敷料直接加壓傷口</li>
                            <li><strong>抬高傷肢：</strong>抬高受傷部位（如無骨折）</li>
                            <li><strong>包紮固定：</strong>用繃帶包紮固定敷料</li>
                            <li><strong>就醫：</strong>嚴重出血應立即就醫</li>
                        </div>
                    </div>
                    
                    <div class="topic-item" data-topic="burns">
                        <div class="topic-title">
                            燒傷燙傷處理
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="topic-desc">學習處理輕微燒傷、燙傷的方法</div>
                    </div>
                    
                    <div class="detail-content" id="detail-burns">
                        <h3 class="detail-title">燒傷燙傷處理</h3>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">輕微燒傷處理（沖、脫、泡、蓋、送）：</h4>
                        <div class="key-points">
                            <li><strong>沖：</strong>立即用冷水沖洗傷處10-20分鐘</li>
                            <li><strong>脫：</strong>輕輕除去傷處衣物（勿強行撕除）</li>
                            <li><strong>泡：</strong>將傷處浸泡在冷水中減輕疼痛</li>
                            <li><strong>蓋：</strong>用清潔敷料或保鮮膜覆蓋傷口</li>
                            <li><strong>送：</strong>嚴重燒傷應立即送醫</li>
                        </div>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">注意事項：</h4>
                        <div class="key-points">
                            <li><strong>切勿：</strong>塗抹牙膏、醬油、藥膏等物質</li>
                            <li><strong>切勿：</strong>刺破水泡</li>
                            <li><strong>切勿：</strong>使用冰塊直接敷傷處</li>
                            <li><strong>切勿：</strong>用黏性敷料緊貼傷口</li>
                        </div>
                    </div>
                    
                    <div class="topic-item" data-topic="fainting">
                        <div class="topic-title">
                            昏厥處理
                            <i class="fas fa-procedures"></i>
                        </div>
                        <div class="topic-desc">學習處理昏厥、休克等緊急情況</div>
                    </div>
                    
                    <div class="detail-content" id="detail-fainting">
                        <h3 class="detail-title">昏厥處理方法</h3>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">昏厥急救步驟：</h4>
                        <div class="key-points">
                            <li><strong>確保安全：</strong>檢查環境，確保安全</li>
                            <li><strong>評估意識：</strong>輕拍肩膀，詢問"你沒事吧？"</li>
                            <li><strong>求救：</strong>如無反應，立即求救</li>
                            <li><strong>平躺抬高：</strong>讓患者平躺，抬高腿部20-30厘米</li>
                            <li><strong>鬆開衣物：</strong>鬆開頸部、胸部緊身衣物</li>
                            <li><strong>保持通風：</strong>確保空氣流通，讓圍觀者散開</li>
                            <li><strong>觀察等待：</strong>觀察患者呼吸，等待甦醒或救援</li>
                        </div>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">注意事項：</h4>
                        <div class="key-points">
                            <li>不要給昏厥患者餵食或灌水</li>
                            <li>患者甦醒後，讓他休息一會兒再慢慢坐起</li>
                            <li>如患者5分鐘內未甦醒，應立即送醫</li>
                            <li>如有抽搐，保護頭部，勿強行約束</li>
                        </div>
                    </div>
                    
                    <div class="topic-item" data-topic="first-aid-kit">
                        <div class="topic-title">
                            急救箱使用
                            <i class="fas fa-first-aid"></i>
                        </div>
                        <div class="topic-desc">學習急救箱內物品及其正確使用方法</div>
                    </div>
                    
                    <div class="detail-content" id="detail-first-aid-kit">
                        <h3 class="detail-title">急救箱物品與使用</h3>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">急救箱基本物品：</h4>
                        <div class="key-points">
                            <li><strong>消毒膠布：</strong>覆蓋小傷口，防止感染</li>
                            <li><strong>繃帶：</strong>固定敷料、包紮傷口、支持傷肢</li>
                            <li><strong>消毒敷料：</strong>清潔傷口，吸收滲液</li>
                            <li><strong>安全扣針：</strong>固定繃帶末端</li>
                            <li><strong>剪刀：</strong>剪開衣物、繃帶</li>
                            <li><strong>消毒藥水：</strong>清洗傷口（如生理鹽水）</li>
                            <li><strong>手套：</strong>保護施救者，避免交叉感染</li>
                            <li><strong>急救手冊：</strong>參考急救步驟</li>
                        </div>
                        
                        <h4 style="margin: 20px 0 10px; color: var(--dark);">急救箱存放原則：</h4>
                        <div class="key-points">
                            <li>放在固定、容易看見的地方</li>
                            <li>放在小孩不易觸及的地方</li>
                            <li>避免陽光直射和潮濕環境</li>
                            <li>定期檢查物品有效期</li>
                            <li>全家人都要知道急救箱位置</li>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-warning" id="learnCompleteBtn">
                        <i class="fas fa-check-circle"></i> 我已學習此主題，開始教學
                    </button>
                </div>
            </div>
            
            <!-- 右側：教學模擬區 -->
            <div class="concept-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h2 class="card-title">教學模擬區</h2>
                </div>
                
                <div class="teaching-area">
                    <div class="teaching-prompt">
                        <h3 class="teaching-question" id="teachingQuestion">
                            請解釋：什麼是急救的基本目的和黃金步驟？
                        </h3>
                        <p style="color: #666;">想像你正在教一位完全不懂急救的朋友，請用簡單易懂的語言解釋。</p>
                    </div>
                    
                    <div class="recording-area">
                        <h3 style="color: var(--dark); margin-bottom: 20px;">錄下你的解釋</h3>
                        <p style="color: #666; margin-bottom: 20px;">錄音可以幫助你發現解釋不清楚的地方</p>
                        
                        <div class="timer" id="recordingTimer">00:00</div>
                        
                        <div class="recording-controls">
                            <button class="record-btn" id="recordBtn">
                                <i class="fas fa-microphone"></i>
                            </button>
                            
                            <button class="play-btn" id="playBtn" disabled>
                                <i class="fas fa-play"></i>
                            </button>
                            
                            <button class="play-btn" id="stopBtn" disabled>
                                <i class="fas fa-stop"></i>
                            </button>
                        </div>
                        
                        <p id="recordingStatus" style="color: #666; margin-top: 15px;">準備錄音...</p>
                    </div>
                </div>
                
                <div class="notes-area">
                    <h3 style="color: var(--dark); margin-bottom: 15px;">
                        <i class="fas fa-sticky-note"></i> 發現知識盲點
                    </h3>
                    <p style="color: #666; margin-bottom: 15px;">
                        在教學過程中，你發現哪些地方解釋不清楚？哪些概念需要加強學習？
                    </p>
                    
                    <textarea class="notes-input" id="knowledgeGaps" 
                              placeholder="例如：我不太確定燒傷處理的具體時間... 我忘記了急救箱應該放在哪裡..."></textarea>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-success" id="saveNotesBtn">
                            <i class="fas fa-save"></i> 保存知識盲點
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 進度條 -->
        <div class="progress-container fade-in">
            <div class="progress-header">
                <h3 style="color: var(--dark);">費曼學習法進度</h3>
                <span id="progressPercentage">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9rem; color: #666;">
                <span>選擇概念</span>
                <span>教學解釋</span>
                <span>發現盲點</span>
                <span>簡化加強</span>
            </div>
        </div>
        
        <!-- 測驗區 -->
        <div class="quiz-area fade-in">
            <div class="card-header" style="margin-bottom: 25px;">
                <div class="card-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <h2 class="card-title">知識測驗</h2>
            </div>
            
            <div id="quizContent">
                <div class="quiz-question" id="quizQuestion">
                    急救的主要目的是什麼？
                </div>
                
                <div class="quiz-options" id="quizOptions">
                    <!-- 選項將由JavaScript動態生成 -->
                </div>
                
                <div id="quizExplanation" style="display: none; background-color: #e8f4fc; padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px;">
                    <h4 style="color: var(--dark); margin-bottom: 10px;">解釋：</h4>
                    <p id="explanationText"></p>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn btn-primary" id="nextQuizBtn">
                        下一題 <i class="fas fa-arrow-right"></i>
                    </button>
                    <button class="btn btn-warning" id="retryQuizBtn" style="margin-left: 15px; display: none;">
                        <i class="fas fa-redo"></i> 重新測驗
                    </button>
                </div>
            </div>
            
            <div id="quizResults" style="display: none; text-align: center;">
                <div style="font-size: 1.8rem; color: var(--primary); margin: 30px 0;">
                    <i class="fas fa-trophy"></i> 測驗完成！
                </div>
                <div style="font-size: 3rem; font-weight: bold; color: var(--primary); margin: 20px 0;" id="quizScore">
                    0/0
                </div>
                <p style="color: #666; margin-bottom: 30px;">你已經完成了費曼學習法的完整循環！</p>
                <button class="btn btn-primary" id="restartLearningBtn">
                    <i class="fas fa-redo"></i> 學習下一個主題
                </button>
            </div>
        </div>
    </div>

    <script>
        // 學習數據
        const learningData = {
            currentTopic: 'basic-first-aid',
            progress: 0,
            knowledgeGaps: [],
            quizQuestions: [
                {
                    question: "急救的主要目的是什麼？",
                    options: [
                        "完全治癒傷者",
                        "防止傷勢惡化、保存生命、促進康復", 
                        "展示急救技能",
                        "取代專業醫療"
                    ],
                    correct: 1,
                    explanation: "急救的主要目的是防止傷勢惡化、保存傷者生命，以及促進康復。急救不是要完全治癒傷者，而是要為專業醫療爭取時間。"
                },
                {
                    question: "流鼻血時的正確處理方法是什麼？",
                    options: [
                        "仰頭防止血液流出",
                        "坐下，頭微向前傾，用手指捏著鼻骨下的柔軟部分",
                        "用冰塊直接敷在鼻子上",
                        "立即躺下休息"
                    ],
                    correct: 1,
                    explanation: "正確做法是坐下，頭微向前傾，用手指捏著鼻骨下的柔軟部分，用口呼吸，維持10分鐘。仰頭會使血液倒流到喉嚨，可能引起嗆咳或嘔吐。"
                },
                {
                    question: "處理輕微燒傷的正確步驟是什麼？",
                    options: [
                        "塗抹牙膏或醬油",
                        "立即用冷水沖洗傷處10-20分鐘",
                        "刺破水泡防止感染",
                        "用繃帶緊緊包紮"
                    ],
                    correct: 1,
                    explanation: "輕微燒傷應立即用冷水沖洗至少10分鐘，可以減輕疼痛、降低皮膚溫度、防止傷勢惡化。切勿塗抹牙膏、醬油等物質。"
                },
                {
                    question: "急救箱不應該放在什麼地方？",
                    options: [
                        "固定的地方",
                        "小孩不輕易觸及的地方", 
                        "潮濕不通風的地方",
                        "容易看見的地方"
                    ],
                    correct: 2,
                    explanation: "急救箱不應放在潮濕不通風的地方，以免藥物和用品變質失效。應放在固定、乾燥、容易看見且小孩不易觸及的地方。"
                },
                {
                    question: "昏厥時的正確處理方法是什麼？",
                    options: [
                        "圍觀患者，給予鼓勵",
                        "讓患者平躺，抬高腿部",
                        "拍打患者臉部使其清醒",
                        "給患者喝水補充水分"
                    ],
                    correct: 1,
                    explanation: "昏厥時應讓患者平躺，抬高腿部20-30厘米，讓血液回流到腦部。鬆開緊身衣物，確保空氣流通，不要給患者餵食或灌水。"
                }
            ],
            currentQuizIndex: 0,
            quizScore: 0
        };
        
        // 錄音相關變數
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;
        let recordingTime = 0;
        let recordingTimer;
        let audioBlob;
        
        // DOM 元素
        const topicItems = document.querySelectorAll('.topic-item');
        const detailContents = document.querySelectorAll('.detail-content');
        const teachingQuestion = document.getElementById('teachingQuestion');
        const recordBtn = document.getElementById('recordBtn');
        const playBtn = document.getElementById('playBtn');
        const stopBtn = document.getElementById('stopBtn');
        const recordingTimerEl = document.getElementById('recordingTimer');
        const recordingStatus = document.getElementById('recordingStatus');
        const knowledgeGapsInput = document.getElementById('knowledgeGaps');
        const progressFill = document.getElementById('progressFill');
        const progressPercentage = document.getElementById('progressPercentage');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const quizExplanation = document.getElementById('quizExplanation');
        const explanationText = document.getElementById('explanationText');
        const nextQuizBtn = document.getElementById('nextQuizBtn');
        const retryQuizBtn = document.getElementById('retryQuizBtn');
        const quizContent = document.getElementById('quizContent');
        const quizResults = document.getElementById('quizResults');
        const quizScore = document.getElementById('quizScore');
        
        // 主題點擊事件
        topicItems.forEach(item => {
            item.addEventListener('click', function() {
                const topic = this.dataset.topic;
                
                // 更新當前主題
                learningData.currentTopic = topic;
                
                // 更新所有主題的活動狀態
                topicItems.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // 顯示對應的詳細內容
                detailContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `detail-${topic}`) {
                        content.classList.add('active');
                    }
                });
                
                // 更新教學問題
                updateTeachingQuestion(topic);
                
                // 重置進度
                learningData.progress = 0;
                updateProgress();
                
                // 重置測驗
                resetQuiz();
            });
        });
        
        // 更新教學問題
        function updateTeachingQuestion(topic) {
            const questions = {
                'basic-first-aid': '請解釋：什麼是急救的基本目的和黃金步驟？',
                'bleeding': '請解釋：處理流鼻血和傷口出血的正確方法是什麼？',
                'burns': '請解釋：處理輕微燒傷的正確步驟是什麼？有哪些注意事項？',
                'fainting': '請解釋：遇到有人昏厥時，應該如何處理？',
                'first-aid-kit': '請解釋：急救箱應該包含哪些基本物品？存放時要注意什麼？'
            };
            
            teachingQuestion.textContent = questions[topic] || '請解釋這個急救知識主題';
        }
        
        // 完成學習按鈕
        document.getElementById('learnCompleteBtn').addEventListener('click', function() {
            // 更新進度到第二步
            learningData.progress = 25;
            updateProgress();
            
            // 更新教學問題
            updateTeachingQuestion(learningData.currentTopic);
            
            // 提示開始教學
            alert('太好了！現在請嘗試用自己的話解釋這個主題。點擊錄音按鈕開始錄製你的解釋。');
            
            // 啟用錄音按鈕
            recordBtn.disabled = false;
        });
        
        // 錄音功能
        recordBtn.addEventListener('click', async function() {
            if (!isRecording) {
                // 開始錄音
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    
                    mediaRecorder.ondataavailable = event => {
                        audioChunks.push(event.data);
                    };
                    
                    mediaRecorder.onstop = () => {
                        audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                        playBtn.disabled = false;
                        stopBtn.disabled = false;
                        recordingStatus.textContent = '錄音完成！點擊播放聆聽你的解釋';
                        
                        // 更新進度到第三步
                        learningData.progress = 50;
                        updateProgress();
                    };
                    
                    audioChunks = [];
                    mediaRecorder.start();
                    isRecording = true;
                    this.classList.add('recording');
                    this.innerHTML = '<i class="fas fa-stop"></i>';
                    recordingStatus.textContent = '正在錄音...';
                    
                    // 開始計時
                    recordingTime = 0;
                    recordingTimer = setInterval(() => {
                        recordingTime++;
                        const minutes = Math.floor(recordingTime / 60).toString().padStart(2, '0');
                        const seconds = (recordingTime % 60).toString().padStart(2, '0');
                        recordingTimerEl.textContent = `${minutes}:${seconds}`;
                    }, 1000);
                    
                } catch (error) {
                    console.error('錄音失敗:', error);
                    alert('無法訪問麥克風，請確保已授予麥克風權限。');
                }
            } else {
                // 停止錄音
                mediaRecorder.stop();
                isRecording = false;
                this.classList.remove('recording');
                this.innerHTML = '<i class="fas fa-microphone"></i>';
                clearInterval(recordingTimer);
                
                // 停止所有音軌
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        });
        
        // 播放錄音
        playBtn.addEventListener('click', function() {
            if (audioBlob) {
                const audioUrl = URL.createObjectURL(audioBlob);
                const audio = new Audio(audioUrl);
                audio.play();
                
                audio.onended = () => {
                    URL.revokeObjectURL(audioUrl);
                };
            }
        });
        
        // 停止播放
        stopBtn.addEventListener('click', function() {
            // 目前實現較簡單，實際應用中可以添加更多控制
            alert('聆聽完你的解釋後，請在下方筆記區記錄你發現的知識盲點。');
        });
        
        // 保存知識盲點
        document.getElementById('saveNotesBtn').addEventListener('click', function() {
            const gaps = knowledgeGapsInput.value.trim();
            
            if (gaps) {
                // 保存到學習數據
                learningData.knowledgeGaps.push({
                    topic: learningData.currentTopic,
                    gaps: gaps,
                    date: new Date().toISOString()
                });
                
                // 更新進度到第四步
                learningData.progress = 75;
                updateProgress();
                
                // 提示
                alert('知識盲點已保存！現在請重新學習這些薄弱環節，然後進行測驗檢驗你的理解。');
                
                // 清空輸入框
                knowledgeGapsInput.value = '';
                
                // 顯示測驗
                loadQuizQuestion();
            } else {
                alert('請先記錄你發現的知識盲點！');
            }
        });
        
        // 更新進度條
        function updateProgress() {
            progressFill.style.width = `${learningData.progress}%`;
            progressPercentage.textContent = `${learningData.progress}%`;
        }
        
        // 載入測驗題目
        function loadQuizQuestion() {
            const question = learningData.quizQuestions[learningData.currentQuizIndex];
            
            quizQuestion.textContent = question.question;
            quizOptions.innerHTML = '';
            
            // 生成選項
            question.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.textContent = option;
                optionEl.dataset.index = index;
                optionEl.addEventListener('click', () => selectQuizOption(index));
                quizOptions.appendChild(optionEl);
            });
            
            // 隱藏解釋
            quizExplanation.style.display = 'none';
            
            // 顯示測驗區域
            quizContent.style.display = 'block';
            quizResults.style.display = 'none';
        }
        
        // 選擇測驗選項
        function selectQuizOption(index) {
            const options = document.querySelectorAll('.quiz-option');
            const question = learningData.quizQuestions[learningData.currentQuizIndex];
            
            // 移除所有選項的選中狀態
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // 標記選中的選項
            options[index].classList.add('selected');
            
            // 顯示正確/錯誤
            if (index === question.correct) {
                options[index].classList.add('correct');
                learningData.quizScore++;
            } else {
                options[index].classList.add('incorrect');
                options[question.correct].classList.add('correct');
            }
            
            // 顯示解釋
            explanationText.textContent = question.explanation;
            quizExplanation.style.display = 'block';
            
            // 啟用下一題按鈕
            nextQuizBtn.disabled = false;
        }
        
        // 下一題
        nextQuizBtn.addEventListener('click', function() {
            learningData.currentQuizIndex++;
            
            if (learningData.currentQuizIndex < learningData.quizQuestions.length) {
                loadQuizQuestion();
                this.disabled = true;
            } else {
                // 測驗完成
                showQuizResults();
            }
        });
        
        // 顯示測驗結果
        function showQuizResults() {
            // 更新進度到100%
            learningData.progress = 100;
            updateProgress();
            
            // 計算分數
            const totalQuestions = learningData.quizQuestions.length;
            const score = learningData.quizScore;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            quizScore.textContent = `${score}/${totalQuestions}`;
            
            // 顯示結果
            quizContent.style.display = 'none';
            quizResults.style.display = 'block';
            
            // 顯示鼓勵訊息
            let message = '';
            if (percentage >= 80) {
                message = '優秀！你已經充分掌握了這個主題！';
            } else if (percentage >= 60) {
                message = '不錯！但還有一些知識需要加強。';
            } else {
                message = '需要多加練習，建議重新學習這個主題。';
            }
            
            document.querySelector('#quizResults p').textContent = message;
        }
        
        // 重新測驗
        retryQuizBtn.addEventListener('click', function() {
            resetQuiz();
            loadQuizQuestion();
        });
        
        // 重置測驗
        function resetQuiz() {
            learningData.currentQuizIndex = 0;
            learningData.quizScore = 0;
            quizContent.style.display = 'block';
            quizResults.style.display = 'none';
            nextQuizBtn.disabled = true;
        }
        
        // 重新開始學習
        document.getElementById('restartLearningBtn').addEventListener('click', function() {
            // 重置學習數據
            learningData.progress = 0;
            learningData.knowledgeGaps = [];
            learningData.currentQuizIndex = 0;
            learningData.quizScore = 0;
            
            // 更新進度
            updateProgress();
            
            // 重置測驗
            resetQuiz();
            
            // 提示選擇新主題
            alert('請在左側選擇一個新的急救知識主題開始學習！');
            
            // 滾動到頂部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 載入第一個測驗題目
            loadQuizQuestion();
            nextQuizBtn.disabled = true;
            
            // 初始化進度
            updateProgress();
            
            // 初始化錄音按鈕狀態
            recordBtn.disabled = true;
            playBtn.disabled = true;
            stopBtn.disabled = true;
        });
    </script>
</body>
</html>
